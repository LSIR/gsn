<virtual-sensor name="Dirruhorn_CoreStationStatus_Software" priority="10" >
    <processing-class>
        <class-name>gsn.vsensor.BridgeVirtualSensorPermasense</class-name>
        <unique-timestamps>false</unique-timestamps>
        <output-structure>
            <field name="DEVICE_ID" type="INTEGER" />
            <field name="GENERATION_TIME" type="BIGINT" unit="unixtime" index="true"/>
            <field name="TIMESTAMP" type="BIGINT" unit="unixtime" />

            <field name="USERS" type="SMALLINT" />

            <field name="LASTLOG" type="VARCHAR(255)" />
			
           	<field name="CHRONY_STRATUM" type="INTEGER" />
            <field name="CHRONY_SYSTIME_ERROR" type="DOUBLE" unit="s" />
            <field name="CHRONY_FREQUENCY" type="DOUBLE" unit="ppm" />
            <field name="CHRONY_SKEW" type="DOUBLE" unit="ppm" />
            <field name="CHRONY_RTC_ERROR" type="DOUBLE" unit="s" />
            <field name="CHRONY_RTC_GAIN_RATE" type="DOUBLE" unit="ppm" />

            <field name="STATVFS_ROOT_SIZE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_ROOT_FREE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_ROOT_INODES_SIZE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_ROOT_INODES_FREE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_VOL_SIZE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_VOL_FREE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_VOL_INODES_SIZE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_VOL_INODES_FREE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_CARD_SIZE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_CARD_FREE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_CARD_INODES_SIZE" type="BIGINT" unit="bytes" />
            <field name="STATVFS_CARD_INODES_FREE" type="BIGINT" unit="bytes" />

            <field name="DISKSTATS_READS_ISSUED" type="BIGINT" />
            <field name="DISKSTATS_SECTORS_READ" type="BIGINT" />
            <field name="DISKSTATS_SPENT_READING" type="BIGINT" unit="ms" />
            <field name="DISKSTATS_WRITES_COMPLETED" type="BIGINT" />
            <field name="DISKSTATS_SECTORS_WRITTEN" type="BIGINT" />
            <field name="DISKSTATS_SPENT_WRITING" type="BIGINT" unit="ms" />
            <field name="DISKSTATS_IO_IN_PROGRESS" type="INTEGER" />
            <field name="DISKSTATS_SPENT_DOING_IO" type="BIGINT" unit="ms" />
            <field name="DISKSTATS_WEIGHTED_DOING_IO" type="BIGINT" unit="ms" />

            <field name="INTERRUPT_OHCI_HCD_USB1" type="BIGINT" />
            <field name="INTERRUPT_PXA2XX_SPI2" type="BIGINT" />
            <field name="INTERRUPT_PXA_I2C_I2C0" type="BIGINT" />
            <field name="INTERRUPT_STUART" type="BIGINT" />
            <field name="INTERRUPT_BTUART" type="BIGINT" />
            <field name="INTERRUPT_FFUART" type="BIGINT" />
            <field name="INTERRUPT_PXA2XX_MCI" type="BIGINT" />
            <field name="INTERRUPT_DMA" type="BIGINT" />
            <field name="INTERRUPT_OST0" type="BIGINT" />

            <field name="LOADAVG_1_MIN" type="DOUBLE" />
            <field name="LOADAVG_5_MIN" type="DOUBLE" />
            <field name="LOADAVG_15_MIN" type="DOUBLE" />
            <field name="LOADAVG_RUNNABLE_PROCS" type="INTEGER" />

            <field name="MEMINFO_TOTAL" type="INTEGER" unit="kB" />
            <field name="MEMINFO_FREE" type="INTEGER" unit="kB" />
            <field name="MEMINFO_BUFFERS" type="INTEGER" unit="kB" />
            <field name="MEMINFO_CACHED" type="INTEGER" unit="kB" />
            <field name="MEMINFO_SHARED" type="INTEGER" unit="kB" />
            <field name="MEMINFO_KERNEL_STACK" type="INTEGER" unit="kB" />
            <field name="MEMINFO_SLAB" type="INTEGER" unit="kB" />
            <field name="MEMINFO_MAPPED" type="INTEGER" unit="kB" />

            <field name="SCHEDSTAT_YIELD_CALLED" type="INTEGER" />
            <field name="SCHEDSTAT_TASK_RUN_TIME" type="BIGINT" unit="ms" />
            <field name="SCHEDSTAT_TASK_WAIT_TIME" type="BIGINT" unit="ms" />
            <field name="SCHEDSTAT_TASKS_GIVEN" type="BIGINT" />

            <field name="INTERFACES" type="SMALLINT" />
            <field name="ETH0_IN" type="BIGINT" unit="bytes" />
            <field name="ETH0_OUT" type="BIGINT" unit="bytes" />
            <field name="PPP0_IN" type="BIGINT" unit="bytes" />
            <field name="PPP0_OUT" type="BIGINT" unit="bytes" />
            <field name="WLAN0_IN" type="BIGINT" unit="bytes" />
            <field name="WLAN0_OUT" type="BIGINT" unit="bytes" />

            <field name="IP_IN_RECEIVES" type="BIGINT" />
            <field name="IP_IN_HDR_ERRORS" type="INTEGER" />
            <field name="IP_IN_ADDR_ERRORS" type="INTEGER" />
            <field name="IP_IN_UNKNOWN_PROTOS" type="INTEGER" />
            <field name="IP_IN_DISCARDS" type="INTEGER" />
            <field name="IP_IN_DELIVERS" type="BIGINT" />
            <field name="IP_OUT_REQUESTS" type="BIGINT" />
            <field name="IP_OUT_DISCARDS" type="INTEGER" />
            <field name="IP_OUT_NO_ROUTES" type="INTEGER" />

            <field name="ICMP_IN_MESSAGES" type="INTEGER" />
            <field name="ICMP_IN_ERRORS" type="INTEGER" />
            <field name="ICMP_IN_DEST_UNREACHS" type="INTEGER" />
            <field name="ICMP_IN_ECHOS" type="INTEGER" />
            <field name="ICMP_IN_ECHOS_REPS" type="INTEGER" />
            <field name="ICMP_OUT_MESSAGES" type="INTEGER" />
            <field name="ICMP_OUT_ERRORS" type="INTEGER" />
            <field name="ICMP_OUT_DEST_UNREACHS" type="INTEGER" />
            <field name="ICMP_OUT_ECHOS" type="INTEGER" />
            <field name="ICMP_OUT_ECHOS_REPS" type="INTEGER" />

            <field name="TCP_ACTIVE_OPENS" type="INTEGER" />
            <field name="TCP_PASSIVE_OPENS" type="INTEGER" />
            <field name="TCP_ATTEMPT_FAILS" type="INTEGER" />
            <field name="TCP_ESTAB_RESETS" type="INTEGER" />
            <field name="TCP_CURR_ESTAB" type="INTEGER" />
            <field name="TCP_IN_SEGMENTS" type="BIGINT" />
            <field name="TCP_OUT_SEGMENTS" type="BIGINT" />
            <field name="TCP_RETRANS_SEGMENTS" type="INTEGER" />
            <field name="TCP_IN_ERRORS" type="INTEGER" />
            <field name="TCP_OUT_RSTS" type="INTEGER" />

            <field name="UDP_IN_DATAGRAMS" type="BIGINT" />
            <field name="UDP_NO_PORTS" type="INTEGER" />
            <field name="UDP_IN_ERRORS" type="INTEGER" />
            <field name="UDP_OUT_DATAGRAMS" type="BIGINT" />
            <field name="UDP_RCV_BUF_ERRORS" type="INTEGER" />
            <field name="UDP_SND_BUF_ERRORS" type="INTEGER" />

            <field name="TCP_LOSS" type="INTEGER" />
            <field name="TCP_LOSS_UNDO" type="INTEGER" />
            <field name="IP_IN_NO_ROUTES" type="BIGINT" />
            <field name="IP_IN_MCAST_OCTETS" type="BIGINT" />
            <field name="IP_OUT_MCAST_OCTETS" type="BIGINT" />
            <field name="IP_OUT_BCAST_PKTS" type="BIGINT" />
            <field name="IP_OUT_OCTETS" type="BIGINT" />
            <field name="IP_IN_OCTETS" type="BIGINT" />
            <field name="IP_IN_BCAST_OCTETS" type="BIGINT" />
            <field name="IP_IN_MCAST_PKTS" type="BIGINT" />
            <field name="IP_OUT_BCAST_OCTETS" type="BIGINT" />
            <field name="IP_IN_BCAST_PKTS" type="BIGINT" />
            <field name="IP_OUT_MCAST_PKTS" type="BIGINT" />
            <field name="IP_IN_TRUNCATED_PKTS" type="BIGINT" />

            <field name="SOCKSTAT_USED_SOCKETS" type="INTEGER" />
            <field name="SOCKSTAT_TCP_IN_USE" type="INTEGER" />
            <field name="SOCKSTAT_TCP_ORPHAN" type="INTEGER" />
            <field name="SOCKSTAT_TCP_TW" type="INTEGER" />
            <field name="SOCKSTAT_TCP_ALLOC" type="INTEGER" />
            <field name="SOCKSTAT_TCP_MEM" type="INTEGER" />
            <field name="SOCKSTAT_UDP_IN_USE" type="INTEGER" />
            <field name="SOCKSTAT_UPD_MEM" type="INTEGER" />

            <field name="SOFTIRQ_TIMER" type="BIGINT" />
            <field name="SOFTIRQ_TASKLET" type="BIGINT" />
            <field name="SOFTIRQ_HRTIMER" type="BIGINT" />

            <field name="STAT_PROCS_IN_USER_MODE" type="BIGINT" />
            <field name="STAT_NICED_IN_USER_MODE" type="BIGINT" />
            <field name="STAT_PROCS_IN_KERNEL_MODE" type="BIGINT" />
            <field name="STAT_PROCS_IDLE" type="BIGINT" />
            <field name="STAT_PROCS_IO_WAIT" type="BIGINT" />
            <field name="STAT_PROCS_SERVICING_IRQS" type="BIGINT" />
            <field name="STAT_PROCS_SERVICING_SOFTIRQS" type="BIGINT" />
            <field name="STAT_CONTEXT_SWITCHES" type="BIGINT" />
            <field name="STAT_PROCS_THREADS_CREATED" type="INTEGER" />
            <field name="STAT_PROCS_BLOCKED" type="INTEGER" />

            <field name="UPTIME" type="DOUBLE" unit="s" />
            <field name="IDLETIME" type="DOUBLE" unit="s" />
            
            <field name="DATA_IMPORT_SOURCE" type="SMALLINT" />
        </output-structure>
    </processing-class>
    <description>show software status information of the CoreStations from the Dirruhorn deployment</description>
    <life-cycle pool-size="10" />
    <addressing />
    <storage />
    <streams>
        <stream name="data1">
            <source alias="source" storage-size="1" sampling-rate="1">
                <address wrapper="backlog">
                    <predicate key="remote-connection">permasense-dh-bs01.ethz.ch:9003</predicate>
                    <predicate key="plugin-classname">gsn.wrappers.backlog.plugins.CoreStationStatusPlugin</predicate>
                    <predicate key="status-data-type">software</predicate>
                </address>
                <query> select * from wrapper </query>
            </source>
            <query> select * from source </query>
        </stream>
        <stream name="data3">
            <source alias="source" storage-size="1" sampling-rate="1">
                <address wrapper="backlog">
                    <predicate key="remote-connection">permasense-rd-bs01.ethz.ch:9003</predicate>
                    <predicate key="plugin-classname">gsn.wrappers.backlog.plugins.CoreStationStatusPlugin</predicate>
                    <predicate key="status-data-type">software</predicate>
                </address>
                <query> select * from wrapper </query>
            </source>
            <query> select * from source </query>
        </stream>
        <stream name="data5">
            <source alias="source" storage-size="1" sampling-rate="1">
                <address wrapper="backlog">
                    <predicate key="remote-connection">permasense-dh-gps03.ethz.ch:9003</predicate>
                    <predicate key="plugin-classname">gsn.wrappers.backlog.plugins.CoreStationStatusPlugin</predicate>
                    <predicate key="status-data-type">software</predicate>
                </address>
                <query> select * from wrapper </query>
            </source>
            <query> select * from source </query>
        </stream>
        <stream name="data6">
            <source alias="source" storage-size="1" sampling-rate="1">
                <address wrapper="backlog">
                    <predicate key="remote-connection">permasense-gg-bs01.ethz.ch:9003</predicate>
                    <predicate key="plugin-classname">gsn.wrappers.backlog.plugins.CoreStationStatusPlugin</predicate>
                    <predicate key="status-data-type">software</predicate>
                </address>
                <query> select * from wrapper </query>
            </source>
            <query> select * from source </query>
        </stream>
        <stream name="data7">
            <source alias="source" storage-size="1" sampling-rate="1">
                <address wrapper="backlog">
                    <predicate key="remote-connection">permasense-gg-gps01.ethz.ch:9003</predicate>
                    <predicate key="plugin-classname">gsn.wrappers.backlog.plugins.CoreStationStatusPlugin</predicate>
                    <predicate key="status-data-type">software</predicate>
                </address>
                <query> select * from wrapper </query>
            </source>
            <query> select * from source </query>
        </stream>

        <stream name="data10">
            <source alias="source" storage-size="1" sampling-rate="1">
                <address wrapper="backlog">
                    <predicate key="remote-connection">permasense-gg-cam01.ethz.ch:9003</predicate>
                    <predicate key="plugin-classname">gsn.wrappers.backlog.plugins.CoreStationStatusPlugin</predicate>
                    <predicate key="status-data-type">software</predicate>
                </address>
                <query> select * from wrapper </query>
            </source>
            <query> select * from source </query>
        </stream>


        <stream name="data11">
            <source alias="source" storage-size="1" sampling-rate="1">
                <address wrapper="backlog">
                    <predicate key="remote-connection">permasense-gg-cam02.ethz.ch:9003</predicate>
                    <predicate key="plugin-classname">gsn.wrappers.backlog.plugins.CoreStationStatusPlugin</predicate>
                    <predicate key="status-data-type">software</predicate>
                </address>
                <query> select * from wrapper </query>
            </source>
            <query> select * from source </query>
        </stream>

        <stream name="data12">
            <source alias="source" storage-size="1" sampling-rate="1">
                <address wrapper="backlog">
                    <predicate key="remote-connection">permasense-bh-bs01.ethz.ch:9003</predicate>
                    <predicate key="plugin-classname">gsn.wrappers.backlog.plugins.CoreStationStatusPlugin</predicate>
                    <predicate key="status-data-type">software</predicate>
                </address>
                <query> select * from wrapper </query>
            </source>
            <query> select * from source </query>
        </stream>
        </streams>
</virtual-sensor>
