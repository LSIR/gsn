<virtual-sensor name="Saastal_Topology" priority="10" >
    <processing-class>
        <class-name>gsn.vsensor.TopologyVirtualSensor</class-name>
        <unique-timestamps>false</unique-timestamps>
        <init-params>
            <param name="dozer-command-vs">Saastal_Dozer_Command</param>
            
            <param name="nodehealth-stream-name">data9</param>
            <param name="node-id-field">HEADER_ORIGINATORID</param>
            <param name="parent-id-field">PAYLOAD_PARENTID</param>
            <param name="timestamp-field">TIMESTAMP</param>
            <param name="generation-time-field">GENERATION_TIME</param>
            <param name="vsys-field">PAYLOAD_SYSVOLTAGE</param>
            <param name="sdivoltage-field">PAYLOAD_SDIVOLTAGE</param>
            <param name="current-field">PAYLOAD_SIBCURRENT</param>
            <param name="temperature-field">PAYLOAD_TEMPERATURE</param>
            <param name="humidity-field">PAYLOAD_HUMIDITY</param>
            <param name="flash-count-field">PAYLOAD_FLASHSTATUS</param>
            <param name="uptime-field">PAYLOAD_UPTIME</param>
            <param name="valid-field">PAYLOAD_SAMPLE_VALID</param>
            
            <param name="powerswitch-stream-name">data11</param>
            <param name="powerswitch-p1-field">PAYLOAD_PORT1ON</param>
            <param name="powerswitch-p2-field">PAYLOAD_PORT2ON</param>
            
            <param name="rssi-stream-name">data_rssi</param>
            <param name="rssi-node-id-field">RSSI_NODEID</param>
            <param name="rssi-field">RSSI</param>
            
            <param name="eventlogger-stream-name">data_eventlogger</param>
            <param name="eventlogger-id-field">EVENT_ID</param>
            <param name="eventlogger-value-field">EVENT_VALUE</param>
            
            <param name="access-node-stream-name">data4</param>
            <param name="ae-stream-name">data18</param>
            <param name="wgps-stream-name">data26</param>
            
            <param name="corestation-statistics-stream-name">data25</param>
            <param name="corestation-connected-field">CONNECTED</param>
            
            <param name="backlogstatus-dynamic-stream-name">data27</param>
            <param name="backlogstatus-db-entries-field">DB_ENTRIES</param>
            
            <param name="dpp-stream-name">data28</param>
            
        </init-params>
        <!-- web-input>
            <command name="dataconfiguration">
                <field name="configuration" type="*text">XML representation of a network configuration</field>
            </command>
        </web-input -->
        <output-structure>
            <field name="DATA" type="BINARY"/>
        </output-structure>
    </processing-class>
    <description>Sensornode Topology of Saastal deployment</description>
    <life-cycle pool-size="10" />
    <addressing />
    <storage history-size="1" />
    <streams>
    
      <stream name="data0">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_adccomdiff
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data1">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_adcmux1
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data2">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_adcmux2
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data3">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_basedebug
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data4">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_basestatus
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <!-- stream name="data5">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_decagonmux
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream -->
    <stream name="data6">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_digitaldcx
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <!-- stream name="data7">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_drift
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream -->
    <stream name="data8">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_eventlogger
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data9">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME, PAYLOAD_SAMPLE_VALID, PAYLOAD_PARENTID, PAYLOAD_SYSVOLTAGE, PAYLOAD_TEMPERATURE, PAYLOAD_HUMIDITY, PAYLOAD_SIBCURRENT, PAYLOAD_FLASHSTATUS, PAYLOAD_UPTIME, PAYLOAD_SDIVOLTAGE
            from saastal_dozer_nodehealth
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data10">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_nodeinfo
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data11">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME, PAYLOAD_PORT1ON, PAYLOAD_PORT2ON
            from saastal_dozer_powerswitch
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data12">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_rssi
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data13">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_statecounter
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>

    <stream name="data_rssi0">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
             select * from saastal_dozer_rssi
           </predicate>
         </address>
         <query> select TIMESTAMP, GENERATION_TIME, HEADER_ORIGINATORID, 
                    PAYLOAD_RSSI_ID0 as RSSI_NODEID,
                    PAYLOAD_RSSI_RSSI0 as RSSI from wrapper where PAYLOAD_RSSI_RSSI0 is not null
         </query>
       </source>
     <query> select * from source </query>
     </stream>
    <stream name="data_rssi1">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
             select * from saastal_dozer_rssi
           </predicate>
         </address>
         <query> select TIMESTAMP, GENERATION_TIME, HEADER_ORIGINATORID, 
                    PAYLOAD_RSSI_ID1 as RSSI_NODEID,
                    PAYLOAD_RSSI_RSSI1 as RSSI from wrapper where PAYLOAD_RSSI_RSSI1 is not null
         </query>
       </source>
     <query> select * from source </query>
     </stream>
    <stream name="data_rssi2">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
             select * from saastal_dozer_rssi
           </predicate>
         </address>
         <query> select TIMESTAMP, GENERATION_TIME, HEADER_ORIGINATORID, 
                    PAYLOAD_RSSI_ID2 as RSSI_NODEID,
                    PAYLOAD_RSSI_RSSI2 as RSSI from wrapper where PAYLOAD_RSSI_RSSI2 is not null
         </query>
       </source>
     <query> select * from source </query>
     </stream>
    <stream name="data_rssi3">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
             select * from saastal_dozer_rssi
           </predicate>
         </address>
         <query> select TIMESTAMP, GENERATION_TIME, HEADER_ORIGINATORID, 
                    PAYLOAD_RSSI_ID3 as RSSI_NODEID,
                    PAYLOAD_RSSI_RSSI3 as RSSI from wrapper where PAYLOAD_RSSI_RSSI3 is not null
         </query>
       </source>
     <query> select * from source </query>
     </stream>
    <stream name="data_rssi4">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
             select * from saastal_dozer_rssi
           </predicate>
         </address>
         <query> select TIMESTAMP, GENERATION_TIME, HEADER_ORIGINATORID, 
                    PAYLOAD_RSSI_ID4 as RSSI_NODEID,
                    PAYLOAD_RSSI_RSSI4 as RSSI from wrapper where PAYLOAD_RSSI_RSSI4 is not null
         </query>
       </source>
     <query> select * from source </query>
     </stream>
    <stream name="data_rssi5">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
             select * from saastal_dozer_rssi
           </predicate>
         </address>
         <query> select TIMESTAMP, GENERATION_TIME, HEADER_ORIGINATORID, 
                    PAYLOAD_RSSI_ID5 as RSSI_NODEID,
                    PAYLOAD_RSSI_RSSI5 as RSSI from wrapper where PAYLOAD_RSSI_RSSI5 is not null
         </query>
       </source>
     <query> select * from source </query>
     </stream>
    <stream name="data_rssi6">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
             select * from saastal_dozer_rssi
           </predicate>
         </address>
         <query> select TIMESTAMP, GENERATION_TIME, HEADER_ORIGINATORID, 
                    PAYLOAD_RSSI_ID6 as RSSI_NODEID,
                    PAYLOAD_RSSI_RSSI6 as RSSI from wrapper where PAYLOAD_RSSI_RSSI6 is not null
         </query>
       </source>
     <query> select * from source </query>
     </stream>
     
     <stream name="data_eventlogger0">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
              select * from Saastal_Dozer_Eventlogger
           </predicate>
        </address>
        <query> select TIMESTAMP, HEADER_ORIGINATORID, (GENERATION_TIME - (PAYLOAD_EVENTLOG_TIME0 * 1000)) as GENERATION_TIME,
                    PAYLOAD_EVENTLOG_ID0 as EVENT_ID,
                    CASEWHEN(PAYLOAD_EVENTLOG_TYPE0=0,NULL,PAYLOAD_EVENTLOG_VALUE0) as EVENT_VALUE from wrapper where PAYLOAD_EVENTLOG_ID0 is not NULL 
        </query>
      </source>
      <query> select * from source </query>
     </stream>
     <stream name="data_eventlogger1">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
              select * from Saastal_Dozer_Eventlogger
           </predicate>
        </address>
        <query> select TIMESTAMP, HEADER_ORIGINATORID, (GENERATION_TIME - (PAYLOAD_EVENTLOG_TIME1 * 1000)) as GENERATION_TIME,
                    PAYLOAD_EVENTLOG_ID1 as EVENT_ID,
                    CASEWHEN(PAYLOAD_EVENTLOG_TYPE1=0,NULL,PAYLOAD_EVENTLOG_VALUE1) as EVENT_VALUE from wrapper where PAYLOAD_EVENTLOG_ID1 is not NULL 
        </query>
      </source>
      <query> select * from source </query>
     </stream>
      <stream name="data_eventlogger2">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
              select * from Saastal_Dozer_Eventlogger
           </predicate>
        </address>
        <query> select TIMESTAMP, HEADER_ORIGINATORID, (GENERATION_TIME - (PAYLOAD_EVENTLOG_TIME2 * 1000)) as GENERATION_TIME,
                    PAYLOAD_EVENTLOG_ID2 as EVENT_ID,
                    CASEWHEN(PAYLOAD_EVENTLOG_TYPE2=0,NULL,PAYLOAD_EVENTLOG_VALUE2) as EVENT_VALUE from wrapper where PAYLOAD_EVENTLOG_ID2 is not NULL 
        </query>
      </source>
      <query> select * from source </query>
     </stream>
      <stream name="data_eventlogger3">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
              select * from Saastal_Dozer_Eventlogger
           </predicate>
        </address>
        <query> select TIMESTAMP, HEADER_ORIGINATORID, (GENERATION_TIME - (PAYLOAD_EVENTLOG_TIME3 * 1000)) as GENERATION_TIME,
                    PAYLOAD_EVENTLOG_ID3 as EVENT_ID,
                    CASEWHEN(PAYLOAD_EVENTLOG_TYPE3=0,NULL,PAYLOAD_EVENTLOG_VALUE3) as EVENT_VALUE from wrapper where PAYLOAD_EVENTLOG_ID3 is not NULL 
        </query>
      </source>
      <query> select * from source </query>
     </stream>
      <stream name="data_eventlogger4">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
              select * from Saastal_Dozer_Eventlogger
           </predicate>
        </address>
        <query> select TIMESTAMP, HEADER_ORIGINATORID, (GENERATION_TIME - (PAYLOAD_EVENTLOG_TIME4 * 1000)) as GENERATION_TIME,
                    PAYLOAD_EVENTLOG_ID4 as EVENT_ID,
                    CASEWHEN(PAYLOAD_EVENTLOG_TYPE4=0,NULL,PAYLOAD_EVENTLOG_VALUE4) as EVENT_VALUE from wrapper where PAYLOAD_EVENTLOG_ID4 is not NULL 
        </query>
      </source>
      <query> select * from source </query>
     </stream>
      <stream name="data_eventlogger5">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
              select * from Saastal_Dozer_Eventlogger
           </predicate>
        </address>
        <query> select TIMESTAMP, HEADER_ORIGINATORID, (GENERATION_TIME - (PAYLOAD_EVENTLOG_TIME5 * 1000)) as GENERATION_TIME,
                    PAYLOAD_EVENTLOG_ID5 as EVENT_ID,
                    CASEWHEN(PAYLOAD_EVENTLOG_TYPE5=0,NULL,PAYLOAD_EVENTLOG_VALUE5) as EVENT_VALUE from wrapper where PAYLOAD_EVENTLOG_ID5 is not NULL 
        </query>
      </source>
      <query> select * from source </query>
     </stream>
      <stream name="data_eventlogger6">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
              select * from Saastal_Dozer_Eventlogger
           </predicate>
        </address>
        <query> select TIMESTAMP, HEADER_ORIGINATORID, (GENERATION_TIME - (PAYLOAD_EVENTLOG_TIME6 * 1000)) as GENERATION_TIME,
                    PAYLOAD_EVENTLOG_ID6 as EVENT_ID,
                    CASEWHEN(PAYLOAD_EVENTLOG_TYPE6=0,NULL,PAYLOAD_EVENTLOG_VALUE6) as EVENT_VALUE from wrapper where PAYLOAD_EVENTLOG_ID6 is not NULL 
        </query>
      </source>
      <query> select * from source </query>
     </stream>
     <!-- stream name="data14">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_wxt520windpth
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data15">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_wxt520sup
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data16">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_wxt520prec
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data17">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_wxt520ident
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream >
    < stream name="data18">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_aedaqhealthdata
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    < stream name="data19">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_aestatistics
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data20">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_aedata
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data21">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_th3ident
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data22">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_th3temp
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data23">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_enviroscanident
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data24">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_enviroscandata
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream -->
    <stream name="data25">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select DEVICE_ID, GENERATION_TIME, CONNECTED
            from saastal_statistics
          </predicate>
        </address>
        <query>select DEVICE_ID as HEADER_ORIGINATORID, GENERATION_TIME as TIMESTAMP, GENERATION_TIME, CONNECTED from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream> 
    <stream name="data26">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME
            from saastal_dozer_wgpssv
          </predicate>
        </address>
        <query>select * from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    <stream name="data27">
      <source alias="source" storage-size="1" sampling-rate="1">
        <address wrapper="local">
          <predicate key="query">
            select  DEVICE_ID, TIMESTAMP, GENERATION_TIME, DB_ENTRIES
            from saastal_backlogstatus_dynamic
          </predicate>
        </address>
        <query>select DEVICE_ID as HEADER_ORIGINATORID, TIMESTAMP, GENERATION_TIME, DB_ENTRIES from wrapper</query>
      </source>
      <query> select * from source </query>
    </stream>
    </streams>
</virtual-sensor>
